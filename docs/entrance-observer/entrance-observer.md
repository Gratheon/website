---
title: üëÅÔ∏è‚Äçüó®Ô∏è Entrance observer
sidebar_position: 5
hide_table_of_contents: true
---
Main client service is [beehive-entrance-video-processor](https://github.com/Gratheon/beehive-entrance-video-processor), it needs to run on the edge device to capture and send data to web-app. Our main priority is inference on the edge device, but we also want to have hybrid inference with cloud support.
### Video processing, playback and analytics

```mermaid
flowchart LR
	web-app("<a href='https://github.com/Gratheon/web-app'>web-app</a>\n:8080") --"fetch video streams"--> graphql-router("<a href='https://github.com/Gratheon/graphql-router'>graphql-router</a>") --"list video stream URLs"--> gate-video-stream -- "get data for playback" --> mysql

	web-app --"record & upload \n 10s webcam video"--> gate-video-stream("<a href='https://github.com/Gratheon/gate-video-stream'>gate-video-stream</a>\n:8900") --"inference video"--> models-gate-tracker("<a href='https://github.com/Gratheon/models-gate-tracker'>models-gate-tracker</a>")

	gate-video-stream --"store video re-training with 1 month TTL"--> aws-s3
	gate-video-stream --"store results long-term" --> mysql

	entrance-observer("<a href='https://github.com/Gratheon/entrance-observer'>entrance-observer</a>") --"record & upload 10s video chunks\nsend edge-computed telemetry"--> gate-video-stream

	entrance-observer -."send detected bees \n timeseries counts".-> telemetry-api("<a href='https://github.com/Gratheon/telemetry-api'>telemetry-api</a>")

	web-app --"include analytics page"--> grafana("<a href='https://github.com/Gratheon/grafana'>grafana</a>\n:9000") --"read bee traffic over time"--> influxdb("influxdb:5300")
```
## Choosing processing architecture

We can approach where to process video from different angles:

| **Where**                                                                                                                                                                                                                                                                                                                                                               | **Pros**                                                                                                                                                                                                                                                                            | **Cons**                                                                                                                                                                                                                                   |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Edge device without GPU  <br />raspberry-pi  <br />  <br />ex.  <br />[üá®üáø¬†BeeLogger](https://www.notion.so/BeeLogger-ad269086bf8449faa0aae6754f879181?pvs=21), [BeePi](https://www.notion.so/BeePi-2e3023f492864fa98b2790743c3ba6e4?pvs=21)                                                                                                                           | - cheap ~ 95 EUR for the board                                                                                                                                                                                                                                                      | - limited to simple numerical models  <br />- may not be reliable                                                                                                                                                                          |
| Edge-device with GPU  <br />(jetson nano)  <br />  <br />ex.  <br />[üá©üá™Apic.ai](https://www.notion.so/Apic-ai-7859a940fd644a3fa35008fd3a2f1909?pvs=21), [üá¶üá∫Beemate](https://www.notion.so/Beemate-7f54f62332334254b42e3e584dfae537?pvs=21), [üî¨BeeAlarmed. Masters thesis](https://www.notion.so/BeeAlarmed-Masters-thesis-d9c40374718b480ab08a3872f441a2d8?pvs=21) | - efficient  <br />- low network dependency  <br />- can work offline with own GPU                                                                                                                                                                                                  | ~ cost 230 EUR for the board alone                                                                                                                                                                                                         |
| Hybrid:  <br />- on-premise (local) GPU workstation  <br />- Video streaming devices                                                                                                                                                                                                                                                                                    | - lower cost in total                                                                                                                                                                                                                                                               | - higher initial cost for the device  <br />- need of dedicated workstation location                                                                                                                                                       |
| Cloud-only, ex.  [LabelBee](https://www.notion.so/LabelBee-482ad7f33192487caae38697b21b7f5d?pvs=21)                                                                                                                                                                                                                                                                     |                                                                                                                                                                                                                                                                                     | - need high network bandwidth  <br />- need to optimize for variable network bandwidth  <br />- expensive  <br />- video streaming and processing cost  <br />- video storage cost                                                         |
| Specialized [PCB devices](https://jlcpcb.com/)                                                                                                                                                                                                                                                                                                                          | - energy efficiency  <br />- low production cost                                                                                                                                                                                                                                    | - usually low on RAM, GPU  <br />- high development cost                                                                                                                                                                                   |
| On a mobile phone                                                                                                                                                                                                                                                                                                                                                       | - price controlled by the customer  <br />- has built-in networking  <br />- has a camera  <br />- has screen  <br />- has battery & power management  <br />- no vendor-lock  <br />- easiest to get started  <br />- easy for beekeeper to setup  <br />- automatic app redeploys | - high variety of phones, inconsistent experience  <br />- for processing on the phone, issues with GPU, need to use custom mobile tensorflow  <br />- too high-level (in-browser), hard to handle exceptions & may need user intervention |
