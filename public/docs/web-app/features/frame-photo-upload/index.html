<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-web-app/features/frame-photo-upload" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Frame Photo Upload - Technical Documentation | Gratheon</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://gratheon.com/img/gratheon-web-app.webp"><meta data-rh="true" name="twitter:image" content="https://gratheon.com/img/gratheon-web-app.webp"><meta data-rh="true" property="og:url" content="https://gratheon.com/docs/web-app/features/frame-photo-upload"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Frame Photo Upload - Technical Documentation | Gratheon"><meta data-rh="true" name="description" content="üéØ Overview"><meta data-rh="true" property="og:description" content="üéØ Overview"><link data-rh="true" rel="icon" href="/favicons/favicon.ico"><link data-rh="true" rel="canonical" href="https://gratheon.com/docs/web-app/features/frame-photo-upload"><link data-rh="true" rel="alternate" href="https://gratheon.com/docs/web-app/features/frame-photo-upload" hreflang="en"><link data-rh="true" rel="alternate" href="https://gratheon.com/docs/web-app/features/frame-photo-upload" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"üì± Web-app","item":"https://gratheon.com/docs/web-app/"},{"@type":"ListItem","position":2,"name":"Frame Photo Upload - Technical Documentation","item":"https://gratheon.com/docs/web-app/features/frame-photo-upload"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Gratheon RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Gratheon Atom Feed">




<link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-KH4KC9",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script><link rel="stylesheet" href="/assets/css/styles.46f37f77.css">
<script src="/assets/js/runtime~main.bd9f0d63.js" defer="defer"></script>
<script src="/assets/js/main.6b9b8d7a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>document.documentElement.setAttribute("data-theme","light"),document.documentElement.setAttribute("data-theme-choice","light"),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script>
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KH4KC9" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_cAw_" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo_v7w.svg" alt="Gratheon" class="themedComponent_JvYm themedComponent--light_LkwR"><img src="/img/logo_v7w.svg" alt="Gratheon" class="themedComponent_JvYm themedComponent--dark_tUww"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/about">About</a><a class="navbar__item navbar__link" href="/about/products">Products</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/API/">Docs</a><a class="navbar__item navbar__link" sidebarid="researchSidebar" href="/research">Research</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/pricing">Pricing</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbarSearchContainer_f6Ff"><input type="text" placeholder="Search" style="padding:7px 15px;border:2px solid #CCC;border-radius:5px"></div><a href="https://discord.gg/PcbP4uedWj" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar--discord-link" aria-label="Discord Invite"></a><a href="https://github.com/gratheon/web-app" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header--github-link" aria-label="GitHub repository"></a><a href="https://app.gratheon.com/account/authenticate/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Log in<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_ES_1"><use href="#theme-svg-external-link"></use></svg></a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper__Za8"><div class="docsWrapper_tP7r"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_UKXV" type="button"></button><div class="docRoot_OXsM"><aside class="theme-doc-sidebar-container docSidebarContainer_DT74"><div class="sidebarViewport_sDE8"><div class="sidebar_Opk5"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_f2k6"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_zrGg menu__link menu__link--sublist" href="/docs/API/"><span title="üîó API" class="categoryLinkLabel_z34k">üîó API</span></a><button aria-label="Expand sidebar category &#x27;üîó API&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_zrGg menu__link menu__link--sublist menu__link--active" href="/docs/web-app/"><span title="üì± Web-app" class="categoryLinkLabel_z34k">üì± Web-app</span></a><button aria-label="Collapse sidebar category &#x27;üì± Web-app&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/web-app/Tech stack, conventions, environments"><span title="Tech stack, conventions, environments" class="linkLabel_dHA3">Tech stack, conventions, environments</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/web-app/UX - UI wireframes"><span title="UX - UI wireframes" class="linkLabel_dHA3">UX - UI wireframes</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_zrGg menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/web-app/features/split-colony"><span title="features" class="categoryLinkLabel_z34k">features</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/web-app/features/split-colony"><span title="Split Colony - Technical Documentation" class="linkLabel_dHA3">Split Colony - Technical Documentation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/web-app/features/join-colonies"><span title="Join Colonies - Technical Documentation" class="linkLabel_dHA3">Join Colonies - Technical Documentation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/web-app/features/frame-photo-upload"><span title="Frame Photo Upload - Technical Documentation" class="linkLabel_dHA3">Frame Photo Upload - Technical Documentation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/web-app/features/apiary-management"><span title="Apiary Management - Technical Documentation" class="linkLabel_dHA3">Apiary Management - Technical Documentation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/web-app/features/queen-detection"><span title="Queen Detection - Technical Documentation" class="linkLabel_dHA3">Queen Detection - Technical Documentation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/web-app/features/queen-management"><span title="Queen Management - Technical Documentation" class="linkLabel_dHA3">Queen Management - Technical Documentation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/web-app/features/frame-side-management"><span title="Frame Side Management - Technical Documentation" class="linkLabel_dHA3">Frame Side Management - Technical Documentation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/web-app/features/hive-management"><span title="Hive Management - Technical Documentation" class="linkLabel_dHA3">Hive Management - Technical Documentation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/web-app/features/user-registration"><span title="User Registration - Technical Documentation" class="linkLabel_dHA3">User Registration - Technical Documentation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/web-app/features/user-profile-editing"><span title="User Profile Editing - Technical Documentation" class="linkLabel_dHA3">User Profile Editing - Technical Documentation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/web-app/features/telemetry-storage"><span title="Hive Telemetry Storage - Technical Documentation" class="linkLabel_dHA3">Hive Telemetry Storage - Technical Documentation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/web-app/features/timeseries-analytics"><span title="Timeseries Data Analytics - Technical Documentation" class="linkLabel_dHA3">Timeseries Data Analytics - Technical Documentation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/web-app/features/bottom-board-management"><span title="bottom-board-management" class="linkLabel_dHA3">bottom-board-management</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_zrGg menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/web-app/ü•û DB schemas/gate-video-stream"><span title="ü•û DB schemas" class="categoryLinkLabel_z34k">ü•û DB schemas</span></a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_zrGg menu__link menu__link--sublist" href="/docs/beehive-sensors/"><span title="üå°Ô∏è Beehive IoT sensors" class="categoryLinkLabel_z34k">üå°Ô∏è Beehive IoT sensors</span></a><button aria-label="Expand sidebar category &#x27;üå°Ô∏è Beehive IoT sensors&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_zrGg menu__link menu__link--sublist" href="/docs/entrance-observer/"><span title="üëÅÔ∏è‚Äçüó®Ô∏è Entrance observer" class="categoryLinkLabel_z34k">üëÅÔ∏è‚Äçüó®Ô∏è Entrance observer</span></a><button aria-label="Expand sidebar category &#x27;üëÅÔ∏è‚Äçüó®Ô∏è Entrance observer&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_zrGg menu__link menu__link--sublist" href="/docs/robotic-beehive/"><span title="üßø Robotic beehive" class="categoryLinkLabel_z34k">üßø Robotic beehive</span></a><button aria-label="Expand sidebar category &#x27;üßø Robotic beehive&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://github.com/orgs/Gratheon/projects/5" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_HYrJ"><span title="‚òëÔ∏è Tasks" class="linkLabel_dHA3">‚òëÔ∏è Tasks</span><svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_ES_1"><use href="#theme-svg-external-link"></use></svg></a></li></ul></nav></div></div></aside><main class="docMainContainer_o6bJ"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_pMYj"><div class="docItemContainer_aQSU"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Bqeg" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_nXN1"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/web-app/"><span>üì± Web-app</span></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">features</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Frame Photo Upload - Technical Documentation</span></li></ul></nav><div class="tocCollapsible_RuM8 theme-doc-toc-mobile tocMobile_zSi9"><button type="button" class="clean-btn tocCollapsibleButton_XjgU">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Frame Photo Upload - Technical Documentation</h1></header>
<h3 class="anchor anchorTargetStickyNavbar_Nb_J" id="-overview">üéØ Overview<a href="#-overview" class="hash-link" aria-label="Direct link to üéØ Overview" title="Direct link to üéØ Overview" translate="no">‚Äã</a></h3>
<p>Frame photo upload system enabling users to upload images of beehive frames with automatic processing pipeline that triggers AI detection models, generates thumbnails, stores images in object storage, and provides real-time analysis feedback. Core workflow feature for all frame-based AI analysis.</p>
<h3 class="anchor anchorTargetStickyNavbar_Nb_J" id="Ô∏è-architecture">üèóÔ∏è Architecture<a href="#Ô∏è-architecture" class="hash-link" aria-label="Direct link to üèóÔ∏è Architecture" title="Direct link to üèóÔ∏è Architecture" translate="no">‚Äã</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Nb_J" id="components">Components<a href="#components" class="hash-link" aria-label="Direct link to Components" title="Direct link to Components" translate="no">‚Äã</a></h4>
<ul>
<li class=""><strong>FileUploader</strong>: React component for drag-drop and click-to-upload interface</li>
<li class=""><strong>FrameSideView</strong>: Container managing upload state and detection visualization</li>
<li class=""><strong>DetectionOverlay</strong>: Canvas-based rendering of AI detection results</li>
<li class=""><strong>ZoomableImage</strong>: Optimized image viewer with lazy loading</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Nb_J" id="services">Services<a href="#services" class="hash-link" aria-label="Direct link to Services" title="Direct link to Services" translate="no">‚Äã</a></h4>
<ul>
<li class=""><strong>image-splitter</strong>: Primary service orchestrating image processing, ML model invocation, storage</li>
<li class=""><strong>models-bee-detector</strong>: Worker bee, drone, queen detection</li>
<li class=""><strong>models-frame-resources</strong>: Cell detection (brood, honey, pollen)</li>
<li class=""><strong>Clarifai API</strong>: Queen cup, varroa mite detection</li>
<li class=""><strong>AWS S3/Minio</strong>: Object storage for original and thumbnail images</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Nb_J" id="-technical-specifications">üìã Technical Specifications<a href="#-technical-specifications" class="hash-link" aria-label="Direct link to üìã Technical Specifications" title="Direct link to üìã Technical Specifications" translate="no">‚Äã</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Nb_J" id="image-processing-pipeline">Image Processing Pipeline<a href="#image-processing-pipeline" class="hash-link" aria-label="Direct link to Image Processing Pipeline" title="Direct link to Image Processing Pipeline" translate="no">‚Äã</a></h4>
<div class="language-text codeBlockContainer_lo7j theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_I6Tg"><pre tabindex="0" class="prism-code language-text codeBlock_BiRX thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_DO4G"><span class="token-line" style="color:#393A34"><span class="token plain">1. Upload (web-app) ‚Üí Direct POST to image-splitter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. Store original ‚Üí S3/Minio bucket</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. Create job queue entries (resize, detect_bees, detect_cells, etc.)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4. Process jobs asynchronously:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   - Generate thumbnails (200px, 800px, 1600px)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   - Invoke ML models</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   - Store detection results</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5. Publish Redis events for real-time updates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">6. Update GraphQL cache</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Nb_J" id="graphql-api">GraphQL API<a href="#graphql-api" class="hash-link" aria-label="Direct link to GraphQL API" title="Direct link to GraphQL API" translate="no">‚Äã</a></h4>
<div class="language-graphql codeBlockContainer_lo7j theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_I6Tg"><pre tabindex="0" class="prism-code language-graphql codeBlock_BiRX thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_DO4G"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">mutation</span><span class="token plain"> </span><span class="token definition-mutation function" style="color:#d73a49">uploadFrameSide</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable variable-input" style="color:#36acaa">$frameId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">ID</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable variable-input" style="color:#36acaa">$side</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">FrameSide</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable variable-input" style="color:#36acaa">$file</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">Upload</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property-query property-mutation">uploadFrameSide</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">frameId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token variable variable-input" style="color:#36acaa">$frameId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">side</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token variable variable-input" style="color:#36acaa">$side</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">file</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token variable variable-input" style="color:#36acaa">$file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">url</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">thumbnailUrl</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token object">detections</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">count</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token object">boxes</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">x</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">y</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">width</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">height</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">confidence</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">query</span><span class="token plain"> </span><span class="token definition-query function" style="color:#d73a49">frameSide</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">ID</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property-query">frameSide</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">url</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">resizedSmall</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token property-query">url</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">SMALL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">resizedMedium</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token property-query">url</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">MEDIUM</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">resizedLarge</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token property-query">url</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">LARGE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token object">detections</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">bees</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">queens</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token object">cells</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">total</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">capped_brood</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">larvae</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">eggs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">pollen</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">honey</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">empty</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">subscription</span><span class="token plain"> </span><span class="token property-query">frameSideProcessing</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$frameSideId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">ID</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property-query">frameSideProcessing</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">frameSideId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$frameSideId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">status</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">progress</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">message</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Nb_J" id="rest-api-endpoints">REST API Endpoints<a href="#rest-api-endpoints" class="hash-link" aria-label="Direct link to REST API Endpoints" title="Direct link to REST API Endpoints" translate="no">‚Äã</a></h4>
<div class="language-text codeBlockContainer_lo7j theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_I6Tg"><pre tabindex="0" class="prism-code language-text codeBlock_BiRX thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_DO4G"><span class="token-line" style="color:#393A34"><span class="token plain">POST /upload/:frameSideId</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - Direct file upload endpoint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - Multipart form-data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - Returns: { url, id, status }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GET /file/:frameSideId/:size?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - Retrieve image by size (original, small, medium, large)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - Returns: Image binary with appropriate Content-Type</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Nb_J" id="database-schema">Database Schema<a href="#database-schema" class="hash-link" aria-label="Direct link to Database Schema" title="Direct link to Database Schema" translate="no">‚Äã</a></h4>
<div class="language-sql codeBlockContainer_lo7j theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_I6Tg"><pre tabindex="0" class="prism-code language-sql codeBlock_BiRX thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_DO4G"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> frame_sides </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  id </span><span class="token keyword" style="color:#00009f">INT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AUTO_INCREMENT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  frame_id </span><span class="token keyword" style="color:#00009f">INT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  side </span><span class="token keyword" style="color:#00009f">ENUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;left&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;right&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  file_url </span><span class="token keyword" style="color:#00009f">VARCHAR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">512</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  created_at </span><span class="token keyword" style="color:#00009f">TIMESTAMP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DEFAULT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CURRENT_TIMESTAMP</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  updated_at </span><span class="token keyword" style="color:#00009f">TIMESTAMP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DEFAULT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CURRENT_TIMESTAMP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">UPDATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CURRENT_TIMESTAMP</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">FOREIGN</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">frame_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">REFERENCES</span><span class="token plain"> frames</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DELETE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CASCADE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> detections </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  id </span><span class="token keyword" style="color:#00009f">INT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AUTO_INCREMENT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  frame_side_id </span><span class="token keyword" style="color:#00009f">INT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  detection_type </span><span class="token keyword" style="color:#00009f">ENUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;bee&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;queen&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cell&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;varroa&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cup&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;beetle&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ant&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  bbox_json JSON</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  confidence </span><span class="token keyword" style="color:#00009f">FLOAT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  created_at </span><span class="token keyword" style="color:#00009f">TIMESTAMP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DEFAULT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CURRENT_TIMESTAMP</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">FOREIGN</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">frame_side_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">REFERENCES</span><span class="token plain"> frame_sides</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DELETE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CASCADE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> jobs </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  id </span><span class="token keyword" style="color:#00009f">INT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AUTO_INCREMENT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ENUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;resize&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;detect_bees&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;detect_cells&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;detect_queens&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;detect_varroa&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;detect_cups&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  frame_side_id </span><span class="token keyword" style="color:#00009f">INT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">status</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ENUM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;pending&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;processing&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;completed&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;failed&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  retries </span><span class="token keyword" style="color:#00009f">INT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DEFAULT</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  created_at </span><span class="token keyword" style="color:#00009f">TIMESTAMP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DEFAULT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CURRENT_TIMESTAMP</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  processed_at </span><span class="token keyword" style="color:#00009f">TIMESTAMP</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INDEX</span><span class="token plain"> idx_jobs_status </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> jobs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">status</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> created_at</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INDEX</span><span class="token plain"> idx_detections_frame_side </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> detections</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">frame_side_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> detection_type</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Nb_J" id="-implementation-details">üîß Implementation Details<a href="#-implementation-details" class="hash-link" aria-label="Direct link to üîß Implementation Details" title="Direct link to üîß Implementation Details" translate="no">‚Äã</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Nb_J" id="frontend">Frontend<a href="#frontend" class="hash-link" aria-label="Direct link to Frontend" title="Direct link to Frontend" translate="no">‚Äã</a></h4>
<ul>
<li class=""><strong>Framework</strong>: React with TypeScript</li>
<li class=""><strong>File Upload</strong>: Direct POST to image-splitter (bypasses GraphQL router for large files)</li>
<li class=""><strong>State Management</strong>: Apollo Client cache + local component state</li>
<li class=""><strong>Optimization</strong>:<!-- -->
<ul>
<li class="">Progressive image loading (small ‚Üí medium ‚Üí large)</li>
<li class="">Canvas-based detection rendering with GPU acceleration</li>
<li class="">Virtual scrolling for frame lists</li>
</ul>
</li>
<li class=""><strong>Real-time Updates</strong>: GraphQL subscriptions via Redis pub/sub</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Nb_J" id="backend-image-splitter">Backend (image-splitter)<a href="#backend-image-splitter" class="hash-link" aria-label="Direct link to Backend (image-splitter)" title="Direct link to Backend (image-splitter)" translate="no">‚Äã</a></h4>
<ul>
<li class=""><strong>Language</strong>: TypeScript/Node.js with Fastify</li>
<li class=""><strong>Job Queue</strong>: MySQL-based persistent queue with retry logic</li>
<li class=""><strong>Image Processing</strong>:<!-- -->
<ul>
<li class="">Jimp for resizing</li>
<li class="">webp-converter for format optimization</li>
<li class="">3 thumbnail sizes: 200px, 800px, 1600px</li>
</ul>
</li>
<li class=""><strong>ML Orchestration</strong>: Sequential job processing<!-- -->
<ol>
<li class="">Resize job (creates thumbnails)</li>
<li class="">Bee detection (internal model)</li>
<li class="">Cell detection (internal model)</li>
<li class="">Queen/varroa/cup detection (Clarifai)</li>
</ol>
</li>
<li class=""><strong>Storage</strong>: AWS S3 (production), Minio (development)</li>
<li class=""><strong>Error Handling</strong>: Sentry integration, job retry mechanism (max 3 attempts)</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Nb_J" id="data-flow">Data Flow<a href="#data-flow" class="hash-link" aria-label="Direct link to Data Flow" title="Direct link to Data Flow" translate="no">‚Äã</a></h4>
<!-- -->
<h3 class="anchor anchorTargetStickyNavbar_Nb_J" id="-testing">üß™ Testing<a href="#-testing" class="hash-link" aria-label="Direct link to üß™ Testing" title="Direct link to üß™ Testing" translate="no">‚Äã</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Nb_J" id="unit-tests">Unit Tests<a href="#unit-tests" class="hash-link" aria-label="Direct link to Unit Tests" title="Direct link to Unit Tests" translate="no">‚Äã</a></h4>
<ul>
<li class="">Location: <code>/test/unit/upload.test.ts</code></li>
<li class="">Coverage: Image validation, thumbnail generation, job creation</li>
<li class="">Mock S3 and database interactions</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Nb_J" id="integration-tests">Integration Tests<a href="#integration-tests" class="hash-link" aria-label="Direct link to Integration Tests" title="Direct link to Integration Tests" translate="no">‚Äã</a></h4>
<ul>
<li class="">Location: <code>/test/integration/upload-flow.test.ts</code></li>
<li class="">Tests: Full upload ‚Üí storage ‚Üí job processing ‚Üí detection</li>
<li class="">Uses Docker Compose test environment</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Nb_J" id="e2e-tests">E2E Tests<a href="#e2e-tests" class="hash-link" aria-label="Direct link to E2E Tests" title="Direct link to E2E Tests" translate="no">‚Äã</a></h4>
<ul>
<li class="">Manual testing guide focuses on:<!-- -->
<ul>
<li class="">Upload various image formats (JPEG, PNG, WebP)</li>
<li class="">Large file handling (up to 10MB)</li>
<li class="">Network interruption recovery</li>
<li class="">Concurrent uploads</li>
<li class="">Detection visualization accuracy</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Nb_J" id="-performance-considerations">üìä Performance Considerations<a href="#-performance-considerations" class="hash-link" aria-label="Direct link to üìä Performance Considerations" title="Direct link to üìä Performance Considerations" translate="no">‚Äã</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Nb_J" id="optimizations">Optimizations<a href="#optimizations" class="hash-link" aria-label="Direct link to Optimizations" title="Direct link to Optimizations" translate="no">‚Äã</a></h4>
<ul>
<li class=""><strong>Direct Upload</strong>: Bypasses GraphQL router to reduce latency</li>
<li class=""><strong>Progressive Loading</strong>: Show low-res first (200px) ‚Üí upgrade to 800px ‚Üí full resolution on zoom</li>
<li class=""><strong>Lazy Job Processing</strong>: Background processing doesn&#x27;t block upload response</li>
<li class=""><strong>Connection Pooling</strong>: MySQL connection pool (10 connections)</li>
<li class=""><strong>Batch Detection</strong>: Process multiple frames in single ML model request where possible</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Nb_J" id="bottlenecks">Bottlenecks<a href="#bottlenecks" class="hash-link" aria-label="Direct link to Bottlenecks" title="Direct link to Bottlenecks" translate="no">‚Äã</a></h4>
<ul>
<li class="">ML model inference time: 5-15 seconds per frame</li>
<li class="">Clarifai API rate limits: 10 requests/second</li>
<li class="">S3 upload speed: Network dependent</li>
<li class="">Large images (&gt;5MB): Slower processing</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Nb_J" id="metrics">Metrics<a href="#metrics" class="hash-link" aria-label="Direct link to Metrics" title="Direct link to Metrics" translate="no">‚Äã</a></h4>
<ul>
<li class="">Average upload time: under 2 seconds</li>
<li class="">Average processing time: 15-30 seconds (all detections)</li>
<li class="">Thumbnail generation: under 3 seconds</li>
<li class="">Success rate: over 98%</li>
<li class="">Job retry rate: under 5%</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Nb_J" id="-technical-limitations">üö´ Technical Limitations<a href="#-technical-limitations" class="hash-link" aria-label="Direct link to üö´ Technical Limitations" title="Direct link to üö´ Technical Limitations" translate="no">‚Äã</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Nb_J" id="current-constraints">Current Constraints<a href="#current-constraints" class="hash-link" aria-label="Direct link to Current Constraints" title="Direct link to Current Constraints" translate="no">‚Äã</a></h4>
<ul>
<li class=""><strong>File Size</strong>: 10MB limit (configurable)</li>
<li class=""><strong>Formats</strong>: JPEG, PNG, WebP only</li>
<li class=""><strong>Concurrent Uploads</strong>: 5 per user (rate limited)</li>
<li class=""><strong>Processing Queue</strong>: FIFO, no prioritization</li>
<li class=""><strong>Storage</strong>: No automatic cleanup of old images</li>
<li class=""><strong>Thumbnails</strong>: Fixed sizes (200px, 800px, 1600px)</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Nb_J" id="known-issues">Known Issues<a href="#known-issues" class="hash-link" aria-label="Direct link to Known Issues" title="Direct link to Known Issues" translate="no">‚Äã</a></h4>
<ul>
<li class="">Large portrait images may exceed memory during resize</li>
<li class="">Clarifai model precision for queens is low (~60% accuracy)</li>
<li class="">No image rotation correction (EXIF orientation ignored)</li>
<li class="">Duplicate upload detection missing</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Nb_J" id="-related-documentation">üîó Related Documentation<a href="#-related-documentation" class="hash-link" aria-label="Direct link to üîó Related Documentation" title="Direct link to üîó Related Documentation" translate="no">‚Äã</a></h3>
<ul>
<li class=""><a class="" href="/docs/web-app/features/frame-side-management">Frame Side Management</a></li>
<li class=""><a class="" href="/docs/web-app/features/queen-detection">Queen Detection</a></li>
<li class=""><a href="https://github.com/Gratheon/image-splitter" target="_blank" rel="noopener noreferrer" class="">image-splitter Service</a></li>
<li class=""><a href="https://github.com/Gratheon/models-bee-detector" target="_blank" rel="noopener noreferrer" class="">models-bee-detector</a></li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Nb_J" id="-development-resources">üìö Development Resources<a href="#-development-resources" class="hash-link" aria-label="Direct link to üìö Development Resources" title="Direct link to üìö Development Resources" translate="no">‚Äã</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Nb_J" id="github-repositories">GitHub Repositories<a href="#github-repositories" class="hash-link" aria-label="Direct link to GitHub Repositories" title="Direct link to GitHub Repositories" translate="no">‚Äã</a></h4>
<ul>
<li class=""><a href="https://github.com/Gratheon/image-splitter" target="_blank" rel="noopener noreferrer" class="">image-splitter</a></li>
<li class=""><a href="https://github.com/Gratheon/web-app" target="_blank" rel="noopener noreferrer" class="">web-app</a> (upload component)</li>
<li class=""><a href="https://github.com/Gratheon/models-bee-detector" target="_blank" rel="noopener noreferrer" class="">models-bee-detector</a></li>
<li class=""><a href="https://github.com/Gratheon/models-frame-resources" target="_blank" rel="noopener noreferrer" class="">models-frame-resources</a></li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Nb_J" id="key-files">Key Files<a href="#key-files" class="hash-link" aria-label="Direct link to Key Files" title="Direct link to Key Files" translate="no">‚Äã</a></h4>
<ul>
<li class="">Frontend: <code>/src/page/hive/frameSide/FileUploader.tsx</code></li>
<li class="">Backend: <code>/src/routes/upload.ts</code></li>
<li class="">Job Processor: <code>/src/jobs/processor.ts</code></li>
<li class="">Detection Storage: <code>/src/db/detections.ts</code></li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Nb_J" id="-technical-notes">üí¨ Technical Notes<a href="#-technical-notes" class="hash-link" aria-label="Direct link to  üí¨ Technical Notes" title="Direct link to üí¨ Technical Notes" translate="no">‚Äã</a></h3>
<ul>
<li class="">Direct upload endpoint bypasses GraphQL for performance (large file handling)</li>
<li class="">Job queue uses MySQL for persistence (survives service restarts)</li>
<li class="">Redis pub/sub provides real-time updates to web-app</li>
<li class="">Thumbnail generation is critical for fast UI rendering (full images are 3-8MB)</li>
<li class="">ML models run on separate services to isolate GPU resources</li>
<li class="">Clarifai used for models not yet trained internally (queens, varroa)</li>
<li class="">Consider implementing image deduplication (hash-based) to save storage</li>
<li class="">Future: Add image preprocessing (rotation, crop, brightness adjustment)</li>
</ul>
<hr>
<p><strong>Last Updated</strong>: December 5, 2025</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_BL5k"><a href="https://github.com/gratheon/website/tree/main/packages/create-docusaurus/templates/shared/docs/web-app/features/frame-photo-upload.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit__SPV" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_t6HD"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/web-app/features/join-colonies"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Join Colonies - Technical Documentation</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/web-app/features/apiary-management"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Apiary Management - Technical Documentation</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_yXC1 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#-overview" class="table-of-contents__link toc-highlight">üéØ Overview</a></li><li><a href="#Ô∏è-architecture" class="table-of-contents__link toc-highlight">üèóÔ∏è Architecture</a></li><li><a href="#-technical-specifications" class="table-of-contents__link toc-highlight">üìã Technical Specifications</a></li><li><a href="#-implementation-details" class="table-of-contents__link toc-highlight">üîß Implementation Details</a></li><li><a href="#-testing" class="table-of-contents__link toc-highlight">üß™ Testing</a></li><li><a href="#-performance-considerations" class="table-of-contents__link toc-highlight">üìä Performance Considerations</a></li><li><a href="#-technical-limitations" class="table-of-contents__link toc-highlight">üö´ Technical Limitations</a></li><li><a href="#-related-documentation" class="table-of-contents__link toc-highlight">üîó Related Documentation</a></li><li><a href="#-development-resources" class="table-of-contents__link toc-highlight">üìö Development Resources</a></li><li><a href="#-technical-notes" class="table-of-contents__link toc-highlight">üí¨ Technical Notes</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item">
                <a href="https://ariregister.rik.ee/est/company/12245103/Gratheon-O%C3%9C">Gratheon O√ú</a><br>
                Tallinn, Estonia
              </li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/privacy">Privacy Policy</a></li><li class="footer__item"><a class="footer__link-item" href="/terms">Terms Of Service</a></li><li class="footer__item"><a href="mailto:pilot@gratheon.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Email<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_ES_1"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://tawk.to/gratheon" target="_blank" rel="noopener noreferrer" class="footer__link-item">Support Chat<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_ES_1"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://gratheon.statuspage.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Service Status<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_ES_1"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://t.me/gratheon" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_ES_1"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://twitter.com/gratheon" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_ES_1"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/gratheon/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_ES_1"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.facebook.com/gratheon" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook</a></li><li class="footer__item"><a href="https://www.twitch.tv/tot_ra" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitch</a></li><li class="footer__item"><a href="https://www.youtube.com/@gratheon-bees" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_ES_1"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><img src="/img/nvidia-inception-program-badge-rgb-for-screen.svg" alt="NVIDIA Inception Program Member" style="max-width:200px; height: auto;"></li></ul></div></div></div></footer></div>
</body>
</html>