"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[28241],{18439:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>l});var s=i(30758);const r={},a=s.createContext(r);function t(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(a.Provider,{value:n},e.children)}},84805:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"web-app/features/user-profile-editing","title":"User Profile Editing - Technical Documentation","description":"\ud83c\udfaf Overview","source":"@site/docs/web-app/features/user-profile-editing.md","sourceDirName":"web-app/features","slug":"/web-app/features/user-profile-editing","permalink":"/docs/web-app/features/user-profile-editing","draft":false,"unlisted":false,"editUrl":"https://github.com/gratheon/website/tree/main/packages/create-docusaurus/templates/shared/docs/web-app/features/user-profile-editing.md","tags":[],"version":"current","sidebarPosition":11,"frontMatter":{"sidebar_position":11},"sidebar":"tutorialSidebar","previous":{"title":"User Registration - Technical Documentation","permalink":"/docs/web-app/features/user-registration"},"next":{"title":"Hive Telemetry Storage - Technical Documentation","permalink":"/docs/web-app/features/telemetry-storage"}}');var r=i(86070),a=i(18439);const t={sidebar_position:11},l="User Profile Editing - Technical Documentation",c={},d=[{value:"\ud83c\udfaf Overview",id:"-overview",level:3},{value:"\ud83c\udfd7\ufe0f Architecture",id:"\ufe0f-architecture",level:3},{value:"Components",id:"components",level:4},{value:"Services",id:"services",level:4},{value:"\ud83d\udccb Technical Specifications",id:"-technical-specifications",level:3},{value:"Database Schema",id:"database-schema",level:4},{value:"GraphQL API",id:"graphql-api",level:4},{value:"\ud83d\udd27 Implementation Details",id:"-implementation-details",level:3},{value:"Frontend",id:"frontend",level:4},{value:"Backend (user-cycle)",id:"backend-user-cycle",level:4},{value:"Data Flow",id:"data-flow",level:4},{value:"\u2699\ufe0f Configuration",id:"\ufe0f-configuration",level:3},{value:"\ud83e\uddea Testing",id:"-testing",level:3},{value:"Unit Tests",id:"unit-tests",level:4},{value:"Integration Tests",id:"integration-tests",level:4},{value:"E2E Tests",id:"e2e-tests",level:4},{value:"\ud83d\udcca Performance Considerations",id:"-performance-considerations",level:3},{value:"Optimizations",id:"optimizations",level:4},{value:"Metrics",id:"metrics",level:4},{value:"\ud83d\udd12 Security Considerations",id:"-security-considerations",level:3},{value:"Password Changes",id:"password-changes",level:4},{value:"Email Changes",id:"email-changes",level:4},{value:"Input Validation",id:"input-validation",level:4},{value:"Audit Trail",id:"audit-trail",level:4},{value:"\ud83d\udeab Technical Limitations",id:"-technical-limitations",level:3},{value:"\ud83d\udd17 Related Documentation",id:"-related-documentation",level:3},{value:"\ud83d\udcda Development Resources",id:"-development-resources",level:3},{value:"\ud83d\udcac Technical Notes",id:"-technical-notes",level:3}];function o(e){const n={a:"a",code:"code",h1:"h1",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"user-profile-editing---technical-documentation",children:"User Profile Editing - Technical Documentation"})}),"\n",(0,r.jsx)(n.h3,{id:"-overview",children:"\ud83c\udfaf Overview"}),"\n",(0,r.jsx)(n.p,{children:"User account settings management system allowing authenticated users to update profile information, change passwords, switch language preferences, and manage account preferences. Integrates with authentication and localization systems for immediate effect."}),"\n",(0,r.jsx)(n.h3,{id:"\ufe0f-architecture",children:"\ud83c\udfd7\ufe0f Architecture"}),"\n",(0,r.jsx)(n.h4,{id:"components",children:"Components"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"AccountSettingsForm"}),": React form component for profile editing"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"PasswordChangeModal"}),": Separate modal for secure password updates"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"LanguageSwitcher"}),": Dropdown for language selection with immediate UI update"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"SettingsPanel"}),": Container organizing all account settings"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"services",children:"Services"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"user-cycle"}),": Primary service handling user profile updates and authentication"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"graphql-router"}),": Federated gateway routing user mutations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"redis"}),": Session management and cache invalidation"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"-technical-specifications",children:"\ud83d\udccb Technical Specifications"}),"\n",(0,r.jsx)(n.h4,{id:"database-schema",children:"Database Schema"}),"\n",(0,r.jsx)(n.mermaid,{value:'erDiagram\n    users ||--o{ sessions : "has active"\n    users ||--o{ audit_log : "tracks changes"\n    \n    users {\n        int id PK\n        varchar email UK\n        varchar password_hash\n        varchar lang "UI language preference"\n        varchar name "display name, optional"\n        boolean email_verified\n        timestamp created_at\n        timestamp updated_at\n    }\n    \n    sessions {\n        varchar session_id PK\n        int user_id FK\n        varchar jwt_token\n        timestamp expires_at\n        timestamp created_at\n    }\n    \n    audit_log {\n        int id PK\n        int user_id FK\n        enum action_type "email_change, password_change, profile_update"\n        json changes "old and new values"\n        varchar ip_address\n        timestamp created_at\n    }'}),"\n",(0,r.jsx)(n.h4,{id:"graphql-api",children:"GraphQL API"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:"type User {\n  id: ID!\n  email: String!\n  name: String\n  lang: String!\n  emailVerified: Boolean!\n  createdAt: DateTime!\n  updatedAt: DateTime!\n}\n\ninput UpdateProfileInput {\n  name: String\n  email: String\n  lang: String\n}\n\ninput ChangePasswordInput {\n  currentPassword: String!\n  newPassword: String!\n}\n\ntype Mutation {\n  updateProfile(input: UpdateProfileInput!): User!\n  changePassword(input: ChangePasswordInput!): Boolean!\n  updateLanguage(lang: String!): User!\n}\n\ntype Query {\n  me: User\n  accountSettings: User\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"-implementation-details",children:"\ud83d\udd27 Implementation Details"}),"\n",(0,r.jsx)(n.h4,{id:"frontend",children:"Frontend"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Framework"}),": React with TypeScript"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Forms"}),": React Hook Form with yup validation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"State Management"}),": Apollo Client cache with optimistic updates"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Language Switch"}),": Updates localStorage + triggers i18n reload"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Password Strength"}),": zxcvbn library for real-time feedback"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"backend-user-cycle",children:"Backend (user-cycle)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Language"}),": Go"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Framework"}),": Custom HTTP server with GraphQL resolver"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Validation"}),": Email format, password strength (min 8 chars)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Security"}),": Current password verification for password changes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Audit"}),": Log all profile changes to audit_log table"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"data-flow",children:"Data Flow"}),"\n",(0,r.jsx)(n.mermaid,{value:"graph TB\n    A[User edits field] --\x3e B[Client-side validation]\n    B --\x3e C{Valid?}\n    C --\x3e|No| D[Show error inline]\n    C --\x3e|Yes| E[Send mutation]\n    E --\x3e F[user-cycle service]\n    F --\x3e G[Verify JWT token]\n    G --\x3e H{Password change?}\n    H --\x3e|Yes| I[Verify current password]\n    H --\x3e|No| J[Update user record]\n    I --\x3e K{Correct?}\n    K --\x3e|No| L[Return error]\n    K --\x3e|Yes| J\n    J --\x3e M[Log to audit_log]\n    M --\x3e N[Invalidate cache]\n    N --\x3e O[Return updated user]\n    O --\x3e P[Update Apollo cache]\n    P --\x3e Q[Update UI]\n    \n    R[Language change] --\x3e S[Update user.lang]\n    S --\x3e T[Reload i18n bundle]\n    T --\x3e U[Re-render UI]"}),"\n",(0,r.jsx)(n.h3,{id:"\ufe0f-configuration",children:"\u2699\ufe0f Configuration"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Environment Variables (user-cycle)"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"MYSQL_HOST=localhost\nMYSQL_PORT=3306\nMYSQL_DATABASE=users\nMYSQL_USER=user_cycle\nMYSQL_PASSWORD=<secret>\n\nJWT_SECRET=<secret>\nJWT_EXPIRY=30d\n\nBCRYPT_COST=12\nPASSWORD_MIN_LENGTH=8\n\nREDIS_HOST=localhost:6379\nREDIS_PASSWORD=<secret>\n\nALLOWED_LANGUAGES=en,ru,uk,et,de,fr,es\n"})}),"\n",(0,r.jsx)(n.h3,{id:"-testing",children:"\ud83e\uddea Testing"}),"\n",(0,r.jsx)(n.h4,{id:"unit-tests",children:"Unit Tests"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Email format validation"}),"\n",(0,r.jsx)(n.li,{children:"Password strength requirements"}),"\n",(0,r.jsx)(n.li,{children:"Language code validation"}),"\n",(0,r.jsx)(n.li,{children:"Current password verification"}),"\n",(0,r.jsx)(n.li,{children:"Audit log creation"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"integration-tests",children:"Integration Tests"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Full profile update flow"}),"\n",(0,r.jsx)(n.li,{children:"Password change with JWT refresh"}),"\n",(0,r.jsx)(n.li,{children:"Language change triggers cache update"}),"\n",(0,r.jsx)(n.li,{children:"Email uniqueness enforcement"}),"\n",(0,r.jsx)(n.li,{children:"Concurrent update handling"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"e2e-tests",children:"E2E Tests"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"User updates name and saves"}),"\n",(0,r.jsx)(n.li,{children:"User changes password successfully"}),"\n",(0,r.jsx)(n.li,{children:"User switches language, UI updates"}),"\n",(0,r.jsx)(n.li,{children:"Invalid current password rejection"}),"\n",(0,r.jsx)(n.li,{children:"Email conflict handling"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"-performance-considerations",children:"\ud83d\udcca Performance Considerations"}),"\n",(0,r.jsx)(n.h4,{id:"optimizations",children:"Optimizations"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Optimistic UI updates for instant feedback"}),"\n",(0,r.jsx)(n.li,{children:"Debounced form validation (300ms)"}),"\n",(0,r.jsx)(n.li,{children:"Partial updates (only changed fields sent)"}),"\n",(0,r.jsx)(n.li,{children:"Redis cache for user profile (TTL: 1 hour)"}),"\n",(0,r.jsx)(n.li,{children:"Database indexes on email and id"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"metrics",children:"Metrics"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Profile update API response: under 200ms"}),"\n",(0,r.jsx)(n.li,{children:"Password change response: under 500ms (bcrypt hashing)"}),"\n",(0,r.jsx)(n.li,{children:"Language switch response: under 100ms"}),"\n",(0,r.jsx)(n.li,{children:"Cache hit rate: over 80%"}),"\n",(0,r.jsx)(n.li,{children:"Form validation: under 50ms"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"-security-considerations",children:"\ud83d\udd12 Security Considerations"}),"\n",(0,r.jsx)(n.h4,{id:"password-changes",children:"Password Changes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Requires current password verification"}),"\n",(0,r.jsx)(n.li,{children:"New password must differ from current"}),"\n",(0,r.jsx)(n.li,{children:"Bcrypt hashing with cost factor 12"}),"\n",(0,r.jsx)(n.li,{children:"Automatic session refresh on password change"}),"\n",(0,r.jsx)(n.li,{children:"Email notification sent on password change"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"email-changes",children:"Email Changes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Email uniqueness enforced at DB level"}),"\n",(0,r.jsx)(n.li,{children:"Case-insensitive comparison"}),"\n",(0,r.jsx)(n.li,{children:"Optional: Email verification for new address (not yet implemented)"}),"\n",(0,r.jsx)(n.li,{children:"Audit log records old and new email"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"input-validation",children:"Input Validation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Email: RFC 5322 compliant"}),"\n",(0,r.jsx)(n.li,{children:"Password: Minimum 8 characters, no maximum"}),"\n",(0,r.jsx)(n.li,{children:"Language: Must be in ALLOWED_LANGUAGES list"}),"\n",(0,r.jsx)(n.li,{children:"Name: Max 100 characters, alphanumeric + spaces"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"audit-trail",children:"Audit Trail"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"All profile changes logged with timestamp"}),"\n",(0,r.jsx)(n.li,{children:"IP address recorded for security review"}),"\n",(0,r.jsx)(n.li,{children:"Changes stored as JSON (old vs new values)"}),"\n",(0,r.jsx)(n.li,{children:"Retained for 2 years"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"-technical-limitations",children:"\ud83d\udeab Technical Limitations"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"No profile picture upload (planned feature)"}),"\n",(0,r.jsx)(n.li,{children:"No two-factor authentication setup (separate feature)"}),"\n",(0,r.jsx)(n.li,{children:"Email changes don't require verification yet (security gap)"}),"\n",(0,r.jsx)(n.li,{children:"No bulk profile updates"}),"\n",(0,r.jsx)(n.li,{children:"Session invalidation on password change affects all devices (by design)"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"-related-documentation",children:"\ud83d\udd17 Related Documentation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/web-app/features/user-registration",children:"User Registration Technical Documentation"})}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"-development-resources",children:"\ud83d\udcda Development Resources"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/Gratheon/user-cycle",children:"user-cycle repository"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/Gratheon/graphql-schema-registry",children:"GraphQL schema"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/Gratheon/web-app/src/components/AccountSettings",children:"Account settings UI"})}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"-technical-notes",children:"\ud83d\udcac Technical Notes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Consider adding email verification flow for email changes (security improvement)"}),"\n",(0,r.jsx)(n.li,{children:'May want to add "delete account" link in settings (separate feature)'}),"\n",(0,r.jsx)(n.li,{children:"Language switch is instant but requires page reload for some static content"}),"\n",(0,r.jsx)(n.li,{children:"Password strength meter helps users create secure passwords"}),"\n",(0,r.jsx)(n.li,{children:"Audit log grows over time - consider archiving strategy after 2 years"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Last Updated"}),": December 5, 2025\n",(0,r.jsx)(n.strong,{children:"Maintained By"}),": Backend Team"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}}}]);