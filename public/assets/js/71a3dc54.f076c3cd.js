"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[72875],{28453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>l});var r=i(96540);const s={},t=r.createContext(s);function a(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(t.Provider,{value:n},e.children)}},82069:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"web-app/features/user-registration","title":"User Registration - Technical Documentation","description":"\ud83c\udfaf Overview","source":"@site/docs/web-app/features/user-registration.md","sourceDirName":"web-app/features","slug":"/web-app/features/user-registration","permalink":"/docs/web-app/features/user-registration","draft":false,"unlisted":false,"editUrl":"https://github.com/gratheon/website/tree/main/packages/create-docusaurus/templates/shared/docs/web-app/features/user-registration.md","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10},"sidebar":"tutorialSidebar","previous":{"title":"Hive Management - Technical Documentation","permalink":"/docs/web-app/features/hive-management"},"next":{"title":"User Profile Editing - Technical Documentation","permalink":"/docs/web-app/features/user-profile-editing"}}');var s=i(74848),t=i(28453);const a={sidebar_position:10},l="User Registration - Technical Documentation",o={},c=[{value:"\ud83c\udfaf Overview",id:"-overview",level:3},{value:"\ud83c\udfd7\ufe0f Architecture",id:"\ufe0f-architecture",level:3},{value:"Components",id:"components",level:4},{value:"Services",id:"services",level:4},{value:"\ud83d\udccb Technical Specifications",id:"-technical-specifications",level:3},{value:"Database Schema",id:"database-schema",level:4},{value:"GraphQL API",id:"graphql-api",level:4},{value:"\ud83d\udd27 Implementation Details",id:"-implementation-details",level:3},{value:"Frontend",id:"frontend",level:4},{value:"Backend (user-cycle)",id:"backend-user-cycle",level:4},{value:"Registration Flow",id:"registration-flow",level:4},{value:"Email Verification Flow",id:"email-verification-flow",level:4},{value:"\u2699\ufe0f Configuration",id:"\ufe0f-configuration",level:3},{value:"\ud83e\uddea Testing",id:"-testing",level:3},{value:"Unit Tests",id:"unit-tests",level:4},{value:"Integration Tests",id:"integration-tests",level:4},{value:"E2E Tests",id:"e2e-tests",level:4},{value:"\ud83d\udcca Performance Considerations",id:"-performance-considerations",level:3},{value:"Optimizations",id:"optimizations",level:4},{value:"Metrics",id:"metrics",level:4},{value:"\ud83d\udd12 Security Considerations",id:"-security-considerations",level:3},{value:"Password Security",id:"password-security",level:4},{value:"Email Verification",id:"email-verification",level:4},{value:"Account Security",id:"account-security",level:4},{value:"\ud83d\udeab Technical Limitations",id:"-technical-limitations",level:3},{value:"\ud83d\udd17 Related Documentation",id:"-related-documentation",level:3},{value:"\ud83d\udcda Development Resources",id:"-development-resources",level:3},{value:"\ud83d\udcac Technical Notes",id:"-technical-notes",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"user-registration---technical-documentation",children:"User Registration - Technical Documentation"})}),"\n",(0,s.jsx)(n.h3,{id:"-overview",children:"\ud83c\udfaf Overview"}),"\n",(0,s.jsx)(n.p,{children:"Email-based user registration system with automatic language detection, email verification workflow, and secure password hashing. Foundation for user authentication and personalized experience across the platform."}),"\n",(0,s.jsx)(n.h3,{id:"\ufe0f-architecture",children:"\ud83c\udfd7\ufe0f Architecture"}),"\n",(0,s.jsx)(n.h4,{id:"components",children:"Components"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"RegistrationForm"}),": React form component with client-side validation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"EmailVerificationBanner"}),": UI component prompting users to verify email"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"LanguageDetector"}),": Browser language detection utility"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"services",children:"Services"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"user-cycle"}),": Primary service handling user authentication and profile management"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"graphql-router"}),": Federated gateway routing registration mutations"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"email-service"}),": SMTP service for sending verification emails (via user-cycle)"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"-technical-specifications",children:"\ud83d\udccb Technical Specifications"}),"\n",(0,s.jsx)(n.h4,{id:"database-schema",children:"Database Schema"}),"\n",(0,s.jsx)(n.mermaid,{value:'erDiagram\n    users ||--o{ apiaries : "owns"\n    users ||--o{ hives : "owns"\n    \n    users {\n        int id PK\n        varchar email UK "unique, not null"\n        varchar password_hash "bcrypt hashed"\n        varchar lang "en, ru, uk, et, default en"\n        boolean email_verified "default false"\n        varchar verification_token "32-byte hex"\n        datetime verification_token_expires "24h from creation"\n        timestamp created_at\n        timestamp updated_at\n    }\n    \n    apiaries {\n        int id PK\n        int user_id FK\n        varchar name\n    }\n    \n    hives {\n        int id PK\n        int user_id FK\n        int apiary_id FK\n        varchar name\n    }'}),"\n",(0,s.jsx)(n.h4,{id:"graphql-api",children:"GraphQL API"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:"type User {\n  id: ID!\n  email: String!\n  lang: String\n  emailVerified: Boolean!\n  createdAt: DateTime!\n}\n\ntype AuthPayload {\n  token: String!\n  user: User!\n}\n\ntype Mutation {\n  register(email: String!, password: String!, lang: String): AuthPayload!\n  verifyEmail(token: String!): AuthPayload!\n  resendVerificationEmail(email: String!): Boolean!\n}\n\ninput RegisterInput {\n  email: String!\n  password: String!\n  lang: String\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"-implementation-details",children:"\ud83d\udd27 Implementation Details"}),"\n",(0,s.jsx)(n.h4,{id:"frontend",children:"Frontend"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Framework"}),": React with TypeScript"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Validation"}),": Client-side email format and password strength checks"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Language Detection"}),": ",(0,s.jsx)(n.code,{children:"navigator.language"})," or ",(0,s.jsx)(n.code,{children:"navigator.languages[0]"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"State Management"}),": Local component state for form handling"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Error Handling"}),": Display validation errors and API errors inline"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"backend-user-cycle",children:"Backend (user-cycle)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Language"}),": Go"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Password Hashing"}),": bcrypt with cost factor 12"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Token Generation"}),": Cryptographically secure random tokens (32 bytes, hex encoded)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Email Service"}),": SMTP integration for verification emails"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Token Expiry"}),": 24 hours for verification tokens"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"registration-flow",children:"Registration Flow"}),"\n",(0,s.jsx)(n.mermaid,{value:"graph TB\n    A[User submits form] --\x3e B[Client validates input]\n    B --\x3e C{Valid?}\n    C --\x3e|No| D[Show validation errors]\n    C --\x3e|Yes| E[Send register mutation]\n    E --\x3e F[user-cycle service]\n    F --\x3e G[Hash password with bcrypt]\n    G --\x3e H[Generate verification token]\n    H --\x3e I[Store user in database]\n    I --\x3e J[Send verification email]\n    J --\x3e K[Return JWT token]\n    K --\x3e L[Redirect to dashboard]\n    L --\x3e M[Show verification banner]"}),"\n",(0,s.jsx)(n.h4,{id:"email-verification-flow",children:"Email Verification Flow"}),"\n",(0,s.jsx)(n.mermaid,{value:"graph TB\n    A[User clicks verification link] --\x3e B[Extract token from URL]\n    B --\x3e C[Send verifyEmail mutation]\n    C --\x3e D[user-cycle validates token]\n    D --\x3e E{Token valid?}\n    E --\x3e|No| F[Return error message]\n    E --\x3e|Yes| G[Mark email_verified = true]\n    G --\x3e H[Clear verification token]\n    H --\x3e I[Return success with JWT]\n    I --\x3e J[Redirect to dashboard]\n    J --\x3e K[Remove verification banner]"}),"\n",(0,s.jsx)(n.h3,{id:"\ufe0f-configuration",children:"\u2699\ufe0f Configuration"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Environment Variables (user-cycle)"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"SMTP_HOST=smtp.gmail.com\nSMTP_PORT=587\nSMTP_USER=noreply@gratheon.com\nSMTP_PASSWORD=<secret>\nSMTP_FROM=Gratheon <noreply@gratheon.com>\nVERIFICATION_URL_BASE=https://app.gratheon.com/verify\nJWT_SECRET=<secret>\nBCRYPT_COST=12\n"})}),"\n",(0,s.jsx)(n.h3,{id:"-testing",children:"\ud83e\uddea Testing"}),"\n",(0,s.jsx)(n.h4,{id:"unit-tests",children:"Unit Tests"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Password hashing and validation"}),"\n",(0,s.jsx)(n.li,{children:"Token generation and validation"}),"\n",(0,s.jsx)(n.li,{children:"Language detection logic"}),"\n",(0,s.jsx)(n.li,{children:"Email validation regex"}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"integration-tests",children:"Integration Tests"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Full registration flow"}),"\n",(0,s.jsx)(n.li,{children:"Email verification workflow"}),"\n",(0,s.jsx)(n.li,{children:"Duplicate email handling"}),"\n",(0,s.jsx)(n.li,{children:"Token expiry validation"}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"e2e-tests",children:"E2E Tests"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"User completes registration form"}),"\n",(0,s.jsx)(n.li,{children:"Receives and clicks verification email"}),"\n",(0,s.jsx)(n.li,{children:"Successfully logs in after verification"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"-performance-considerations",children:"\ud83d\udcca Performance Considerations"}),"\n",(0,s.jsx)(n.h4,{id:"optimizations",children:"Optimizations"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Async email sending (non-blocking)"}),"\n",(0,s.jsx)(n.li,{children:"Database indexes on email and verification_token"}),"\n",(0,s.jsx)(n.li,{children:"Client-side validation before API calls"}),"\n",(0,s.jsx)(n.li,{children:"JWT token caching in localStorage"}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"metrics",children:"Metrics"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Registration API response: under 500ms (excluding email send)"}),"\n",(0,s.jsx)(n.li,{children:"Email delivery: under 30 seconds"}),"\n",(0,s.jsx)(n.li,{children:"Password hashing time: under 200ms"}),"\n",(0,s.jsx)(n.li,{children:"Form validation: under 50ms"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"-security-considerations",children:"\ud83d\udd12 Security Considerations"}),"\n",(0,s.jsx)(n.h4,{id:"password-security",children:"Password Security"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Minimum 8 characters enforced"}),"\n",(0,s.jsx)(n.li,{children:"bcrypt hashing with cost factor 12"}),"\n",(0,s.jsx)(n.li,{children:"No password complexity requirements (length is more important)"}),"\n",(0,s.jsx)(n.li,{children:"Passwords never logged or stored in plain text"}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"email-verification",children:"Email Verification"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Cryptographically secure random tokens"}),"\n",(0,s.jsx)(n.li,{children:"Tokens expire after 24 hours"}),"\n",(0,s.jsx)(n.li,{children:"Tokens are single-use (cleared after verification)"}),"\n",(0,s.jsx)(n.li,{children:"Rate limiting on resend requests (1 per 5 minutes)"}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"account-security",children:"Account Security"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Email uniqueness enforced at database level"}),"\n",(0,s.jsx)(n.li,{children:"Case-insensitive email comparison"}),"\n",(0,s.jsx)(n.li,{children:"Protection against user enumeration (generic error messages)"}),"\n",(0,s.jsx)(n.li,{children:"HTTPS required for all registration endpoints"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"-technical-limitations",children:"\ud83d\udeab Technical Limitations"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"No OAuth/SSO integration (Google, Facebook, etc.)"}),"\n",(0,s.jsx)(n.li,{children:"No phone number verification option"}),"\n",(0,s.jsx)(n.li,{children:"Email sending depends on external SMTP service availability"}),"\n",(0,s.jsx)(n.li,{children:"Language detection limited to browser-reported languages"}),"\n",(0,s.jsx)(n.li,{children:"No CAPTCHA or bot protection (may add if spam becomes issue)"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"-related-documentation",children:"\ud83d\udd17 Related Documentation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/web-app/features/user-profile-editing",children:"User Profile Editing Technical Documentation"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"-development-resources",children:"\ud83d\udcda Development Resources"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/Gratheon/user-cycle",children:"user-cycle repository"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/Gratheon/graphql-schema-registry",children:"GraphQL schema"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.notion.so/User-registration-password-restoration-48f81c4ccbc748ceadf618b28eda9a39",children:"Registration flow diagram"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"-technical-notes",children:"\ud83d\udcac Technical Notes"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Consider adding OAuth providers in future for faster onboarding"}),"\n",(0,s.jsx)(n.li,{children:"Email delivery rate currently around 98% (monitor bounce rates)"}),"\n",(0,s.jsx)(n.li,{children:"Language detection accuracy depends on browser settings (consider IP-based fallback)"}),"\n",(0,s.jsx)(n.li,{children:"JWT tokens valid for 30 days, refresh mechanism may be needed for long-term sessions"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Last Updated"}),": December 5, 2025\n",(0,s.jsx)(n.strong,{children:"Maintained By"}),": Backend Team"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);