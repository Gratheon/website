"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["33881"],{56836(e,n,i){i.r(n),i.d(n,{metadata:()=>r,default:()=>h,frontMatter:()=>o,contentTitle:()=>a,toc:()=>c,assets:()=>l});var r=JSON.parse('{"id":"products/entrance_observer/features/\u{1F3A5} Video streaming via API","title":"\u{1F3A5} Video streaming via API","description":"\u{1F3AF} Purpose","source":"@site/about/products/entrance_observer/features/\u{1F3A5} Video streaming via API.md","sourceDirName":"products/entrance_observer/features","slug":"/products/entrance_observer/features/\u{1F3A5} Video streaming via API","permalink":"/about/products/entrance_observer/features/\u{1F3A5} Video streaming via API","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u{1F441}\uFE0F\u200D\u{1F5E8}\uFE0F Entrance Observer","permalink":"/about/products/entrance_observer/"},"next":{"title":"\u{1F3AE} Client-side app with UI","permalink":"/about/products/entrance_observer/features/\u{1F3AE} Client-side app with UI"}}'),t=i(86070),s=i(18439);let o={},a="\u{1F3A5} Video streaming via API",l={},c=[{value:"\u{1F3AF} Purpose",id:"-purpose",level:3},{value:"\u{1F3AD} User Story",id:"-user-story",level:3},{value:"\u{1F680} Key Benefits",id:"-key-benefits",level:3},{value:"\u{1F527} Technical Overview",id:"-technical-overview",level:3},{value:"\u{1F4CB} Acceptance Criteria",id:"-acceptance-criteria",level:3},{value:"\u{1F6AB} Out of Scope",id:"-out-of-scope",level:3},{value:"\u{1F3D7}\uFE0F Implementation Approach",id:"\uFE0F-implementation-approach",level:3},{value:"\u{1F4CA} Success Metrics",id:"-success-metrics",level:3},{value:"\u{1F517} Related Features",id:"-related-features",level:3},{value:"\u{1F4DA} Resources &amp; References",id:"-resources--references",level:3},{value:"\u{1F4AC} Notes",id:"-notes",level:3}];function d(e){let n={a:"a",h1:"h1",h3:"h3",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"-video-streaming-via-api",children:"\u{1F3A5} Video streaming via API"})}),"\n",(0,t.jsx)(n.h3,{id:"-purpose",children:"\u{1F3AF} Purpose"}),"\n",(0,t.jsx)(n.p,{children:"Enables hardware devices to capture and stream video from beehive entrances to the cloud for remote monitoring and AI analysis."}),"\n",(0,t.jsx)(n.h3,{id:"-user-story",children:"\u{1F3AD} User Story"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"As a beekeeper with custom hardware or limited compute resources"}),"\n",(0,t.jsx)(n.li,{children:"I want to stream video from my beehive entrance to the cloud"}),"\n",(0,t.jsx)(n.li,{children:"So that I can leverage cloud-based AI analysis and remote monitoring without requiring powerful on-device processing"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"-key-benefits",children:"\u{1F680} Key Benefits"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Hardware flexibility"}),": Works with Raspberry Pi, custom PCs, or Jetson Nano devices"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Cloud processing"}),": Offloads AI analysis to cloud infrastructure for devices without GPU"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Remote access"}),": View live and historical video streams from anywhere"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Easy integration"}),": Simple API token authentication and setup"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"-technical-overview",children:"\u{1F527} Technical Overview"}),"\n",(0,t.jsx)(n.p,{children:"Video upload system (src/uploader.py) captures processed video chunks with detection overlays and uploads them to video.gratheon.com via GraphQL mutations. Uses multipart/form-data encoding with both video files and detection metadata, supporting batch uploads with bearer token authentication."}),"\n",(0,t.jsx)(n.h3,{id:"-acceptance-criteria",children:"\u{1F4CB} Acceptance Criteria"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Supports USB camera video capture with OpenCV (CAP_V4L2/CAP_AVFOUNDATION)"}),"\n",(0,t.jsx)(n.li,{children:"Encodes video with AVC1/MP4V codecs for compatibility"}),"\n",(0,t.jsx)(n.li,{children:"Uploads video chunks with detection overlays via GraphQL API"}),"\n",(0,t.jsx)(n.li,{children:"Includes detection metadata file alongside video upload"}),"\n",(0,t.jsx)(n.li,{children:"Uses bearer token authentication (API_TOKEN environment variable)"}),"\n",(0,t.jsx)(n.li,{children:"Supports configurable video chunk length (VIDEO_CHUNK_LENGTH_SEC)"}),"\n",(0,t.jsx)(n.li,{children:"Handles network interruptions with threaded async uploads"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"-out-of-scope",children:"\u{1F6AB} Out of Scope"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Real-time live streaming (batch upload of processed chunks)"}),"\n",(0,t.jsx)(n.li,{children:"Audio streaming (video only)"}),"\n",(0,t.jsx)(n.li,{children:"Real-time two-way communication"}),"\n",(0,t.jsx)(n.li,{children:"Storage management beyond standard retention policies"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\uFE0F-implementation-approach",children:"\u{1F3D7}\uFE0F Implementation Approach"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Video Encoding"}),": OpenCV VideoWriter with AVC1/MP4V codecs"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Upload Protocol"}),": GraphQL mutation via HTTPS POST with multipart/form-data"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Authentication"}),": Bearer token in Authorization header"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Threading"}),": Async upload processing to prevent blocking video capture"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Integration"}),": Links to SECTION_ID (box ID) and timestamp metadata"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Error Handling"}),": Graceful fallback when API credentials not configured"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"-success-metrics",children:"\u{1F4CA} Success Metrics"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Video encoding with proper codec compatibility (AVC1 primary, MP4V fallback)"}),"\n",(0,t.jsx)(n.li,{children:"Successful GraphQL mutation uploads to video.gratheon.com endpoint"}),"\n",(0,t.jsx)(n.li,{children:"Threaded async processing without blocking main video pipeline"}),"\n",(0,t.jsx)(n.li,{children:"Proper multipart encoding with detection metadata files"}),"\n",(0,t.jsx)(n.li,{children:"Bearer token authentication and box ID association"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"-related-features",children:"\u{1F517} Related Features"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/about/products/entrance_observer/features/%F0%9F%8E%AE%20Client-side%20app%20with%20UI",children:"\u{1F3AE} Client-side app with UI"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/about/products/entrance_observer/features/%F0%9F%93%88%20Count%20bees%20coming%20in%20and%20out%20-%20on%20the%20edge",children:"\u{1F4C8} Count bees coming in and out - on the edge"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/about/products/scales/features/%F0%9F%93%88%20Telemetry%20API",children:"\u{1F4C8} Telemetry API"})}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"-resources--references",children:"\u{1F4DA} Resources & References"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/Gratheon/entrance-observer/blob/main/src/uploader.py",children:"Video upload implementation"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://video.gratheon.com/graphql",children:"GraphQL mutation endpoint"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.opencv.org/master/dd/d9e/classcv_1_1VideoWriter.html",children:"OpenCV VideoWriter documentation"})}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"-notes",children:"\u{1F4AC} Notes"}),"\n",(0,t.jsx)(n.p,{children:"Actual implementation using GraphQL mutations for video upload with detection metadata. Enables cloud-based processing for devices without sufficient local compute resources."})]})}function h(e={}){let{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},18439(e,n,i){i.d(n,{R:()=>o,x:()=>a});var r=i(30758);let t={},s=r.createContext(t);function o(e){let n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);